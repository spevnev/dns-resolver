options {
  listen-on { 127.0.0.1; };
  port 1053;

  directory "./build/named";
  key-directory "keys";
  pid-file "named.pid";

  max-cache-size 20%;
  session-keyfile none;
  recursion no;
};

# Disable rndc
controls {};

zone "unsigned.com" {
  type primary;
  file "unsigned.com.db";
  notify no;
};

zone "signed.com" {
  type primary;
  file "signed.com.db";
  notify no;
  dnssec-policy "nsec-policy";
  inline-signing yes;
};

dnssec-policy "nsec-policy" {
  keys {
    ksk lifetime unlimited algorithm ECDSAP256SHA256;
    zsk lifetime 60d algorithm ECDSAP256SHA256;
  };
};

zone "nsec3-signed.com" {
  type primary;
  file "nsec3-signed.com.db";
  notify no;
  dnssec-policy "nsec3-policy";
  inline-signing yes;
};

dnssec-policy "nsec3-policy" {
  keys {
    ksk lifetime unlimited algorithm ECDSAP256SHA256;
    zsk lifetime 60d algorithm ECDSAP256SHA256;
  };
  nsec3param optout no salt-length 8;
};
